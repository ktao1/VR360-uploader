<!DOCTYPE html>
<html>

<head>
  <title>Node Authentication</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" />
  <style>
    html,
    body {
      height: 100%;
    }

    body {
      display: -ms-flexbox;
      display: -webkit-box;
      display: flex;
      -ms-flex-align: center;
      -ms-flex-pack: center;
      -webkit-box-align: center;
      -webkit-box-pack: center;
      justify-content: center;
      padding-top: 10px;
      padding-bottom: 40px;
      background-color: #f5f5f5;
    }

    

    p {
      font-size: 20px;
    }

    #step {
      font-size: 30px;
    }

    .title {
      margin-bottom: 50px;
    }

    table,
    th
    {
      border: 2px solid #60b3eb;
    
    }

    #steps th{
      font-size: 30px;
      padding: 10px;
    }

    th{
      width: 25%;
      text-align: center;
      font-size: 20px;
      padding: 10px;
    }

    h1{
      font-size: 5em;
    }
  </style>

</head>

<body>
  <div class="container">

    <div class="container-fluid bg-3 text-center">
      <h1 class="title" style="color:#cc2500"><b>How to upload your video</b></h1>
      <table style="width: 100%;">
        <tr id="steps">
          <th>Step 1</th>
          <th>Step 2</th>
          <th>Step 3</th>
          <th>Step 4</th>
        </tr>
        <tr>
          <th>
            Input your video's title.
          </th>
          <th>
            Follow the <b>example</b>, input your chunking command.
          </th>
          <th>
            Click <b>Choose File button</b> choose the video you want to upload. Once you choosed the video, you can
            preview the video on the left.
          </th>
          <th>
            Click <b>Upload Video</b> button to upload video.
          </th>
        </tr>
      </table>
    </div>

    <hr>

    <div class="row">
      <!-- GOOGLE INFORMATION -->
      <div class="col-sm-6">
        <video id="video" width="550" height="517" controls></video>
      </div>
      <div class="col-sm-6">
        <div class="well">
          <h3 style="color:#cc2500">
            <span class="fa fa-youtube"></span> VR360 Video Uploader
          </h3>

          <form action="/upload" method="POST" enctype="multipart/form-data">
            <div class="form-group">
              <div class="form-group">
                <label>Video's title</label>
                <input type="text" name="title" placeholder="Please input your video's title" required
                  class="form-control">
              </div>

              <div class="form-group">
                <label>Chunk your video by command</label>
                <textarea name="description" class="form-control" id="description" cols="30" rows="10" placeholder="Example: 
                0:00 - intro
                0:20 - title
                X:XX - XXXX
                .......
                2:00 - final

                You must start at 0:00
                  "></textarea>
              </div>
              <label>Choose the video you want to upload</label>
              <div class="form-group">
                <input type="file" class="form-control" id="videoinput" name="file" required id="" />
              </div>
            </div>

            <div class="form-group">
              <button class="btn btn-block btn-danger">
                Upload Video
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>


  </div>


</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script>
  const input = document.getElementById('videoinput');
  const video = document.getElementById('video');
  const videoSource = document.createElement('source');

  input.addEventListener('change', function () {
    const files = this.files || [];

    if (!files.length) return;

    const reader = new FileReader();

    reader.onload = function (e) {
      videoSource.setAttribute('src', e.target.result);
      video.appendChild(videoSource);
      video.load();
      // video.play();
    };

    reader.onprogress = function (e) {
      console.log('progress: ', Math.round((e.loaded * 100) / e.total));
    };

    reader.readAsDataURL(files[0]);
  });
</script>
<script>

  document.getElementById('description').addEventListener('keydown', function (e) {
    if (e.key == 'Tab') {
      e.preventDefault();
      var start = this.selectionStart;
      var end = this.selectionEnd;

      // set textarea value to: text before caret + tab + text after caret
      this.value = this.value.substring(0, start) +
        "\t" + this.value.substring(end);

      // put caret at right position again
      this.selectionStart =
        this.selectionEnd = start + 1;
    }
  });

  $('textarea').keypress(function (event) {
    if (event.which == 13) {
      event.preventDefault();
      var s = $(this).val();
      $(this).val(s + "\n");
    }
  });
  // $(window).keydown(function(event){
  //   if(event.keyCode == 13) {
  //     event.preventDefault();
  //     return false;
  //   }
  // });
</script>

</html>